schema: '2.0'
stages:
  data_validation:
    cmd: python src/EmotionRecognition/pipeline/stage_02_data_validation.py
    deps:
    - path: artifacts/data_ingestion/CK+
      hash: md5
      md5: a1559eddfd0d86b541e5df18b4b8205e.dir
      size: 1715162
      nfiles: 981
    - path: src/EmotionRecognition/components/data_validation.py
      hash: md5
      md5: deecd642e900b3d997c90f323fc59d47
      size: 1478
    - path: src/EmotionRecognition/pipeline/stage_02_data_validation.py
      hash: md5
      md5: 68c41ce2989a01d37bdbdeb205ef747e
      size: 1212
    params:
      params.yaml:
        DATA_PARAMS.CLASSES:
        - anger
        - contempt
        - disgust
        - fear
        - happy
        - sadness
        - surprise
    outs:
    - path: artifacts/data_validation/status.txt
      hash: md5
      md5: 86e6a2f694c57a675b3e2da6b95ff9ba
      size: 23
  data_preparation:
    cmd: python src/EmotionRecognition/pipeline/stage_03_data_preparation.py
    deps:
    - path: artifacts/data_ingestion
      hash: md5
      md5: 9208f64defb6697b78bab62e943d955d.dir
      size: 302675528
      nfiles: 2
    - path: src/EmotionRecognition/config/configuration.py
      hash: md5
      md5: dacf4230e18681185b786aa280cdec5e
      size: 4275
    - path: src/EmotionRecognition/pipeline/stage_03_data_preparation.py
      hash: md5
      md5: b7a0ef478975a804e219f0cb09db29a2
      size: 1052
    params:
      params.yaml:
        DATA_PARAMS.CLASSES:
        - anger
        - disgust
        - fear
        - happiness
        - neutral
        - sadness
        - surprise
    outs:
    - path: artifacts/data_preparation/test
      hash: md5
      md5: 5e1a5a6a1c38c440820fee0327dd2aa3.dir
      size: 6252184
      nfiles: 3564
    - path: artifacts/data_preparation/train
      hash: md5
      md5: 9e440d3b92e122cbb873185408e14037.dir
      size: 49964858
      nfiles: 28542
  model_training:
    cmd: python src/EmotionRecognition/pipeline/stage_04_model_training.py
    deps:
    - path: artifacts/data_ingestion/CK+
      hash: md5
      md5: a1559eddfd0d86b541e5df18b4b8205e.dir
      size: 1715162
      nfiles: 981
    - path: src/EmotionRecognition/components/model_trainer.py
      hash: md5
      md5: fe9598d7dc08157c2365e4c42bda9d3d
      size: 5183
    - path: src/EmotionRecognition/utils/common.py
      hash: md5
      md5: e59d21fbfbea8e79fadf3b754a7c00ea
      size: 2495
    params:
      params.yaml:
        DATA_PARAMS:
          IMAGE_SIZE:
          - 224
          - 224
          CHANNELS: 3
          BATCH_SIZE: 32
          CLASSES:
          - anger
          - contempt
          - disgust
          - fear
          - happy
          - sadness
          - surprise
          NUM_CLASSES: 7
          VALIDATION_SPLIT: 0.2
        TRAINING_PARAMS:
          EPOCHS: 50
          LEARNING_RATE: 0.001
          OPTIMIZER: Adam
          LOSS_FUNCTION: CategoricalCrossentropy
          METRICS:
          - accuracy
          DROPOUT_RATE: 0.4
    outs:
    - path: artifacts/training/model.keras
      hash: md5
      md5: c956880837c4ed785abf3629145d5d07
      size: 11331400
  model_evaluation:
    cmd: python src/EmotionRecognition/pipeline/stage_05_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/CK+
      hash: md5
      md5: a1559eddfd0d86b541e5df18b4b8205e.dir
      size: 1715162
      nfiles: 981
    - path: artifacts/training/model.keras
      hash: md5
      md5: c956880837c4ed785abf3629145d5d07
      size: 11331400
    - path: src/EmotionRecognition/components/model_evaluation.py
      hash: md5
      md5: 2761a8bbe1404b178ef5563ccbdcbc6f
      size: 3041
    params:
      params.yaml:
        DATA_PARAMS:
          IMAGE_SIZE:
          - 224
          - 224
          CHANNELS: 3
          BATCH_SIZE: 32
          CLASSES:
          - anger
          - contempt
          - disgust
          - fear
          - happy
          - sadness
          - surprise
          NUM_CLASSES: 7
          VALIDATION_SPLIT: 0.2
        TRAINING_PARAMS.DROPOUT_RATE: 0.4
    outs:
    - path: artifacts/evaluation/metrics.json
      hash: md5
      md5: db02916fa635cc9e061f2691eb0d24c5
      size: 74
  data_ingestion:
    cmd: python src/EmotionRecognition/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: e81d04a13848491ac5c1e34747032f6d
      size: 755
    - path: src/EmotionRecognition/components/data_ingestion.py
      hash: md5
      md5: a4a810a298a14e1b522309e7d38d5c18
      size: 1696
    - path: src/EmotionRecognition/config/configuration.py
      hash: md5
      md5: 922acd927260bda90cb259322938f754
      size: 2226
    - path: src/EmotionRecognition/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 93ee4cc030fe917d9235958d5a792202
      size: 1052
    outs:
    - path: artifacts/data_ingestion/CK+
      hash: md5
      md5: a1559eddfd0d86b541e5df18b4b8205e.dir
      size: 1715162
      nfiles: 981
